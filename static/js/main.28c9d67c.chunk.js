(this["webpackJsonpchess-react"]=this["webpackJsonpchess-react"]||[]).push([[0],[,,,,,,,,,,function(t,e){t.exports=[{text:"Mate in 1",position:"8/8/5K1k/8/8/8/8/R7 w - - 0 1",solution:[{from:"a1",to:"h1"}]},{text:"Mate in 2",position:"r2r3k/6pp/7N/3Q4/8/8/6PP/6K1 w - - 0 1",solution:[{from:"d5",to:"g8"},{from:"d8",to:"g8"},{from:"h6",to:"f7"}]},{text:"Play the Saemisch",position:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",solution:[{from:"d2",to:"d4"},{from:"g8",to:"f6"},{from:"c2",to:"c4"},{from:"g7",to:"g6"},{from:"b1",to:"c3"},{from:"f8",to:"g7"},{from:"e2",to:"e4"},{from:"d7",to:"d6"},{from:"f2",to:"f3"}]},{text:"Mate in 1",position:"8/8/8/4n3/8/6k1/6b1/6K1 b - - 0 1",solution:[{from:"e5",to:"f3"}]}]},function(t,e,o){t.exports=o(21)},,,,,function(t,e,o){},,function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){"use strict";o.r(e);var n=o(0),s=o.n(n),a=o(8),i=o.n(a),r=o(2),u=o(3),l=o(5),c=o(4),m=o(1),p=o(6),h=o(9),f=o.n(h),v=(o(16),o(17)),d=function(t){function e(t){var o;return Object(r.a)(this,e),(o=Object(l.a)(this,Object(c.a)(e).call(this,t))).state={game:null,fen:"",toMove:null,solutionProgress:0,timer:null,timeLeft:s.a.createElement("span",null,"\u221e")},o.allowDrag=o.allowDrag.bind(Object(m.a)(o)),o.onDrop=o.onDrop.bind(Object(m.a)(o)),o.updateTimeLeft=o.updateTimeLeft.bind(Object(m.a)(o)),o}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this;console.log("didmount"),console.log("props",this.props);var e=new v(this.props.position),o=e.fen();this.setState({game:e,fen:o},(function(){t.setOrientation(),t.updateToMove()})),this.props.time&&this.setState({timer:setInterval(this.updateTimeLeft,1e3),timeLeft:this.props.time})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"setOrientation",value:function(){if(this.state.game){var t="white";"b"===this.state.game.turn()&&(t="black"),this.setState({orientation:t})}}},{key:"updateTimeLeft",value:function(){var t=Math.round(this.state.timeLeft-1);this.setState({timeLeft:t},(function(){this.state.timeLeft<=0&&(clearInterval(this.state.timer),this.props.onTimeout&&this.props.onTimeout())}))}},{key:"updateToMove",value:function(){var t=this.state.game;if(!t)return!1;var e="White to move";"b"===t.turn()&&(e="Black to move"),this.setState({toMove:e})}},{key:"isCorrectMove",value:function(t){var e=this.props.solution[this.state.solutionProgress];return e.from===t.sourceSquare&&e.to===t.targetSquare?(console.log("correct move!"),!0):(console.log("incorrect move!"),!1)}},{key:"isSolutionComplete",value:function(){return this.state.solutionProgress===this.props.solution.length?(console.log("solution complete!"),!0):(console.log("still got moves to enter"),!1)}},{key:"makeAutoMove",value:function(){console.log("Auto making move");var t=this.state.game,e=this.props.solution[this.state.solutionProgress];t.move(e),this.updateGame(t)}},{key:"allowDrag",value:function(t,e){var o=this.state.game;return!o.game_over()&&!("w"===o.turn()&&"w"!==t.piece.substr(0,1)||"b"===o.turn()&&"b"!==t.piece.substr(0,1))}},{key:"updateGame",value:function(t){var e=this;this.setState({game:t},(function(){e.setState({fen:t.fen()},(function(){e.setState({solutionProgress:e.state.solutionProgress+1},e.updateToMove)}))}))}},{key:"onDrop",value:function(t){console.log(t);var e=this.state.game,o=t.sourceSquare,n=t.targetSquare;return o===n?"snapback":null===e.move({from:o,to:n,promotion:"q"})?"snapback":this.isCorrectMove(t)?(this.updateGame(e),void(this.isSolutionComplete()?(clearInterval(this.state.timer),this.props.onCorrect&&this.props.onCorrect(this.state.timeLeft)):this.makeAutoMove())):(this.state.game.undo(),this.props.onWrongMove&&this.props.onWrongMove(this.state.timeLeft),"snapback")}},{key:"render",value:function(){return s.a.createElement("div",{className:"diagram-container"},s.a.createElement("h5",null,this.state.toMove),s.a.createElement("p",null,this.props.text),s.a.createElement(f.a,{orientation:this.state.orientation,allowDrag:this.allowDrag,onDrop:this.onDrop,position:this.state.fen}),s.a.createElement("p",null,"Time left: ",this.state.timeLeft," seconds"))}}]),e}(n.Component),g=o(10),b=o.n(g),k=(o(18),function(t){function e(t){var o;return Object(r.a)(this,e),(o=Object(l.a)(this,Object(c.a)(e).call(this,t))).results=o.makeResults(),o}return Object(p.a)(e,t),Object(u.a)(e,[{key:"makeResults",value:function(){var t=this;if(!this.props.data)return!1;console.log(this.props.data.results);var e=this.props.data.results.map((function(e){return e.timeSpent===t.props.data.time&&(e.timeout=!0),e}));return{time:this.props.data.time,finalResults:e}}},{key:"render",value:function(){return s.a.createElement("div",{className:"results-container"},s.a.createElement("h4",null,"Results"),s.a.createElement("pre",null,JSON.stringify(this.results,null,3)))}}]),e}(n.Component)),y=(o(19),o(20),function(t){function e(t){var o;return Object(r.a)(this,e),(o=Object(l.a)(this,Object(c.a)(e).call(this,t))).state={questionNumber:0,currentData:null,totalQuestions:o.props.diagrams.length,solutions:[]},o.onCorrect=o.onCorrect.bind(Object(m.a)(o)),o.onTimeout=o.onTimeout.bind(Object(m.a)(o)),o.onWrongMove=o.onWrongMove.bind(Object(m.a)(o)),o}return Object(p.a)(e,t),Object(u.a)(e,[{key:"updateData",value:function(){var t=this.props.diagrams[this.state.questionNumber],e=this.state.questionNumber+1;this.setState({currentData:t,questionNumber:e})}},{key:"componentDidMount",value:function(){this.updateData()}},{key:"isQuizFinished",value:function(){return this.state.questionNumber===this.props.diagrams.length}},{key:"makeSolution",value:function(t,e){console.log("8888888888 makeSolution 88888888888");var o={correct:e};return this.props.time&&(o.timeSpent=this.props.time-t),console.log("this.props.time = ".concat(this.props.time," and timeLeft=").concat(t)),o}},{key:"updateSolutions",value:function(t,e){var o=this.makeSolution(t,e),n=this.state.solutions;n.push(o),this.setState({solutions:n})}},{key:"updateGame",value:function(t,e){if(this.updateSolutions(t,e),this.isQuizFinished()){var o={results:this.state.solutions,time:this.props.time};return this.props.onComplete(o)}this.updateData()}},{key:"onCorrect",value:function(t){this.updateGame(t,!0)}},{key:"onTimeout",value:function(){this.updateGame(0,!1)}},{key:"onWrongMove",value:function(t){this.updateGame(t,!1)}},{key:"render",value:function(){return console.log("on quiz render, currdata",this.state.currentData),s.a.createElement("div",{className:"quiz-container"},s.a.createElement("h3",null,"Question no: ",this.state.questionNumber," out of ",this.state.totalQuestions),this.state.currentData&&s.a.createElement(d,Object.assign({key:this.state.questionNumber,time:this.props.time,onCorrect:this.onCorrect,onWrongMove:this.onWrongMove,onTimeout:this.onTimeout},this.state.currentData)))}}]),e}(n.Component)),O=function(t){function e(t){var o;return Object(r.a)(this,e),(o=Object(l.a)(this,Object(c.a)(e).call(this,t))).state={stage:"quiz"},o.onComplete=o.onComplete.bind(Object(m.a)(o)),o}return Object(p.a)(e,t),Object(u.a)(e,[{key:"onComplete",value:function(t){this.setState({stage:"results",results:t})}},{key:"render",value:function(){return"quiz"===this.state.stage?s.a.createElement(y,{time:5,onComplete:this.onComplete,diagrams:b.a}):s.a.createElement(k,{data:this.state.results})}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[11,1,2]]]);
//# sourceMappingURL=main.28c9d67c.chunk.js.map